---
layout: api_docs
title: Batman.Model Validations
meta: 
  grouping: App Components
  parent: Batman.Model
sub: 
  - title: "Built-In Validations"
    tokens: []
    id: "built-in_validations"
    html: "<p>Built in validators are attached by calling <code>@validate</code> with options designating how to calculate the validity of the attribute:</p>\n<pre><code>test <span class=\"string\">'@validate accepts options to check for validity'</span>, -&gt;\n  QUnit.expect(<span class=\"number\">0</span>)\n  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Post</span> <span class=\"keyword\">extends</span> <span class=\"title\">Batman</span>.<span class=\"title\">Model</span></span>\n    <span class=\"property\">@resourceName</span>: <span class=\"string\">'post'</span>\n\n    <span class=\"property\">@validate</span> <span class=\"string\">'title'</span>, <span class=\"string\">'body'</span>, {presence: <span class=\"literal\">true</span>} <span class=\"comment\"># title and body must be present (not undefined nor '')</span>\n    <span class=\"property\">@validate</span> <span class=\"string\">'body'</span>, {minLength: <span class=\"number\">10</span>}           <span class=\"comment\"># body must be 10 characters long at least</span>\n    <span class=\"property\">@validate</span> <span class=\"string\">'title'</span>, {pattern: <span class=\"regexp\">/^[A-Z]/</span>}      <span class=\"comment\"># Title must start with an uppercase letter</span>\n    <span class=\"property\">@validate</span> <span class=\"string\">'author'</span>, {email: <span class=\"literal\">true</span>}           <span class=\"comment\"># the author field must contain a valid email address</span></code></pre>\n<table>\n<thead>\n<tr>\n<th>Option</th>\n<th>Asserts that ...</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>presence : true</code></td>\n<td>String value is existent (not undefined or null) and has length greater than 0</td>\n</tr>\n<tr>\n<td><code>numeric : true</code></td>\n<td>Value is or can be coerced into a number using <code>parseFloat</code>.</td>\n</tr>\n<tr>\n<td><code>greaterThan : Number</code></td>\n<td>Value is greater than the given number.</td>\n</tr>\n<tr>\n<td><code>greaterThanOrEqualTo : Number</code></td>\n<td>Value is greater than or equal to the given number.</td>\n</tr>\n<tr>\n<td><code>equalTo : Number</code></td>\n<td>Value is equal to the given number.</td>\n</tr>\n<tr>\n<td><code>lessThan : Number</code></td>\n<td>Value is less than the given number.</td>\n</tr>\n<tr>\n<td><code>lessThanOrEqualTo : Number</code></td>\n<td>Value is less than or equal to the given number.</td>\n</tr>\n<tr>\n<td><code>minLength : Number</code></td>\n<td>Value&#39;s <code>length</code> property is greater than the given number.</td>\n</tr>\n<tr>\n<td><code>maxLength : Number</code></td>\n<td>Value&#39;s <code>length</code> property is less than the given number.</td>\n</tr>\n<tr>\n<td><code>length : Number</code></td>\n<td>Value&#39;s <code>length</code> property is exactly the given number.</td>\n</tr>\n<tr>\n<td><code>lengthWithin : [Number, Number]</code>, <code>lengthIn : [Number, number]</code></td>\n<td>Value&#39;s <code>length</code> property is within the range <code>[lower, upper]</code>.</td>\n</tr>\n<tr>\n<td><code>inclusion : in : [list, of, acceptable, values]</code></td>\n<td>Value is equal to one of the values in an array.</td>\n</tr>\n<tr>\n<td><code>exclusion : in : [list, of, unacceptable, values]</code></td>\n<td>Value is not equal to any of the values in an array.</td>\n</tr>\n<tr>\n<td><code>regexp : /regexp/</code></td>\n<td>Value is matching the provided regular expression.</td>\n</tr>\n<tr>\n<td><code>email : true</code></td>\n<td>Value is an email address, per the <a href=\"http://www.w3.org/TR/html5/forms.html#valid-e-mail-ress\">W3C HTML5 definition</a>.</td>\n</tr>\n<tr>\n<td><code>associated : true</code></td>\n<td>Associated record is also valid. If invalid, the message will be &quot;#{associationName} is not valid&quot;.</td>\n</tr>\n<tr>\n<td><code>associatedFields : true</code></td>\n<td>Like <code>associated</code>, but adds error messages with the names of the fields on associated records, eg &quot;Username must at least 10 characters&quot; or &quot;Favorite flavor is not included in the list&quot;.</td>\n</tr>\n<tr>\n<td><code>confirmation : true/String</code></td>\n<td>Record&#39;s <code>#{attr}_confirmation</code> value matches <code>#{attr}</code>. If option is a string, use that attribute instead of <code>#{attribute}_confirmation</code>.</td>\n</tr>\n</tbody>\n</table>\n"
  - title: Custom Validation
    tokens: []
    id: custom_validation
    html: "<p>You can easily define a custom validation by passing a function to <code>@validate</code>:</p>\n<pre><code class=\"lang-coffeescript\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span>.<span class=\"title\">Product</span> <span class=\"keyword\">extends</span> <span class=\"title\">Batman</span>.<span class=\"title\">Model</span></span>\n  <span class=\"property\">@validate</span> <span class=\"string\">'name'</span>, (errors, record, attribute, callback) -&gt;\n    <span class=\"comment\"># custom validation ...</span>\n    callback()</code></pre>\n<p>The function takes <code>(errors, record, attribute, callback)</code>:</p>\n<ul>\n<li><code>errors</code>: the <code>Batman.ErrorsSet</code> for this record</li>\n<li><code>record</code>: the record being validated</li>\n<li><code>attribute</code>: the attribute  being validated</li>\n<li><code>callback</code>: a function to call once validation has been completed. Calling this function is <strong>mandatory</strong>: it enables validations to be asynchronous.</li>\n</ul>\n<p>To show that the record is invalid, a validation function should call <code>errors.add(attribute, message)</code>.</p>\n<p>If you really needed to, you could also extend <a href=\"/docs/api/batman.validator.html\"><code>Batman.Validator</code></a>.</p>\n"
  - title: Conditional Validation
    tokens: []
    id: conditional_validation
    html: "<p>Validations can be skipped by including a conditional check. Pass <code>if</code> or <code>unless</code> as options to <code>@validate</code>:</p>\n<pre><code>test <span class=\"string\">'@validate accepts an if or unless option to determine whether the validation should be performed or not'</span>, -&gt;\n  QUnit.expect(<span class=\"number\">0</span>)\n  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Invoice</span> <span class=\"keyword\">extends</span> <span class=\"title\">Batman</span>.<span class=\"title\">Model</span></span>\n    <span class=\"property\">@resourceName</span>: <span class=\"string\">'invoice'</span>\n    <span class=\"property\">@validate</span> <span class=\"string\">'tax_1_rate'</span>, {presence: <span class=\"literal\">true</span>, <span class=\"keyword\">if</span>: (errors, record, attribute) -&gt; record.get(<span class=\"string\">'tax_1_enabled'</span>)} <span class=\"comment\"># tax 1 rate must be present if tax 1 is enabled</span>\n    <span class=\"property\">@validate</span> <span class=\"string\">'tax_2_rate'</span>, {presence: <span class=\"literal\">true</span>, <span class=\"keyword\">if</span>: <span class=\"string\">'tax_2_rate'</span>} <span class=\"comment\"># passing a string will look for an attribute or accessor with that name on the record</span>\n    <span class=\"property\">@validate</span> <span class=\"string\">'discount_rate'</span>, {presence: <span class=\"literal\">true</span>, <span class=\"keyword\">unless</span>: <span class=\"string\">'discount_disabled'</span>} <span class=\"comment\"># discount rate must be present unless discount is disabled</span></code></pre>\n<p>If you pass a string as <code>if</code> or <code>unless</code>, it will do a <code>@get(string)</code> on the record being validated. If you pass a function, it should have the signature <code>(errors, record, attribute)</code>:</p>\n<ul>\n<li><code>errors</code>: the <code>Batman.ErrorsSet</code> for the record</li>\n<li><code>record</code>: the record being validated</li>\n<li><code>attribute</code>: the attribute being validated</li>\n</ul>\n"
  - title: Custom Messages
    tokens: []
    id: custom_messages
    html: "<p>Batman.js ships with straightforward messages for the built-in validators. However, if you need custom messages, there are several ways to add them.</p>\n<ol>\n<li><strong>Pass a <code>message</code> option</strong>. It may be a string or function. for example:<pre><code> <span class=\"property\">@validate</span> <span class=\"string\">'name'</span>, presence: <span class=\"literal\">true</span>, message: <span class=\"string\">\"must be provided\"</span> <span class=\"comment\"># =&gt; \"Name must be provided\"</span>\n <span class=\"property\">@validate</span> <span class=\"string\">'amount'</span>, <span class=\"keyword\">in</span>: [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>], message: (attribute, messageKey, record) -&gt; <span class=\"string\">\"can't be <span class=\"subst\">#{record.get('amount')}</span>!\"</span></code></pre>\n</li>\n<li><strong>Use a custom validation</strong>. In your custom validation, add the error with your custom message, for example:<pre><code class=\"lang-coffeescript\"> errors.add(<span class=\"string\">\"email_address\"</span>, <span class=\"string\">\"must be provided to ensure that your password isn't lost!\"</span>)</code></pre>\n</li>\n<li><strong>Provide a custom translation</strong>. In your locale, <code>errors.messages.#{messageKey}</code> should match the structure provided by batman.js (<a href=\"https://github.com/batmanjs/batman/blob/master/src/model/validations/validators.coffee\">see source</a>).</li>\n</ol>\n"
tokens: []
id: batman.model_validations
html: "<p>Validations allow a record (ie, instance of <a href=\"/docs/api/batman.model.html\"><code>Batman.Model</code></a>) to be marked as <code>valid</code> or <code>invalid</code> based on a set of programmatic rules. <code>@validate</code> in a model definition adds validations on a model&#39;s attributes, using either a <a href=\"/docs/api/batman.model_validations.html#built-in_validations\">built-in validation</a> or a <a href=\"/docs/api/batman.model_validations.html#custom_validation\">custom validation</a>.</p>\n<p><em>Note</em>: Validation in batman.js is always asynchronous. This is so that the API is consistent regardless of the validations used.</p>\n"

---

{{ page.html }}
<ul class="api-list">
{% for s in page.sub %}
  <li class="api-list-item">
    <h3 class="api-title">
      <a id="{{ s.id }}" class="anchor-target"></a>
      <a href="#{{ s.id }}" class="anchor-link">
      <span class="{% if s.meta %}monospace-heading{% endif %}">{% if s.meta.level == 'class' %}@{% endif %}{{ s.title }}{% if s.meta.params %}{% if s.meta.type == 'property' %}<span class="params">{{ s.meta.params }}</span>{% else %}<span class="params">({{ s.meta.params }})</span>  {% endif %}{% endif %}{% if s.meta.returnType %}<span class="return-type"> : {{ s.meta.returnType }}</span>{% endif %}</span>
      </a>
    </h3>
    {{ s.html }}
  </li>
{% endfor %}
</ul>
